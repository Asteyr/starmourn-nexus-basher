{"name":"nexus community basher","enabled":true,"description":"","type":"group","id":1,"items":[{"type":"function","name":"onLoad","enabled":true,"id":2,"code":"const VERSION = 0.4; //this version of the .nxs package.\nconst branch = 'add-gmcp-skills'; //change this if you want a different branch\nconst user = \"rocketcatmultiverse\" //change this if you've forked.\nvar url = 'https://raw.githubusercontent.com/'+user+'/starmourn-nexus-basher/'+branch+'/'\nvar manifest;\nvar q = $.when(1);\nvar p = $.when(1);\nvar r = $.when(1);\nvar loaded = [];\n\nq = q.then(function(){\n    //start by grabbing the manifest.\n    return $.ajax({\n        url: url + 'MANIFEST?v=' + new Date().getTime()\n    }).done(function(data) {\n        console.log(\"Trying parse of manifest.\");\n        console.log([data]);\n        try {\n            manifest = eval(data);\n            //then grab main.js and initialize nb namespace\n            r = r.then(function(){\n                return $.ajax({\n                    url: url+\"main.js?v=\" + new Date().getTime()\n                }).done(function(data) {\n        \t\t\tconsole.log(\"Trying eval of main.js.\");\n       \t\t\t\tconsole.log([data]);\n                    try {\n                        eval(data);\n                        console.log(\"Loaded main.js on branch \"+branch+\".\",\"green\");\n                        if (branch !== \"main\") {\n                                nb.debugMode = true;\n                            \tdisplay_notice(\"We are not on main branch, debug mode is on\",\"yellow\");\n                        }\n                        nb.version = {\"nxs\":VERSION};\n                        nb.updateCheck(); // check for updates to our .nxs\n                        //now go through the manifest and grab everything!\n                        manifest.forEach(function(item, indem) {\n                            let a = url + item + '.js';\n                            p = p.then(function() {\n                                return $.ajax({\n                                url: a + '?v=' + new Date().getTime()\n                                }).done(function(data) {\n                                    console.log('Trying eval(data) for ' + a + '.')\n                                    console.log([data])\n                                    try {\n                                        eval(data);\n                                        console.log(\"Loaded \"+item+\" on branch \"+branch+\".\",\"green\");\n                                        loaded.push(item);\n                                        if (loaded.length === manifest.length) nb.onLoad();\n                                    } catch(err) { \n                                        display_notice(\"Nexus community basher failed to load at \"+item+\".js, see console for error.\",\"red\");\n                                        console.log(err); \n                                    }\n                                    })\n                            })\n                        })\n                        \n                    } catch (err) {\n                        display_notice(\"Nexus community basher failed to load at main.js, see console for error.\",\"red\");\n                        console.log(err); \n                    }\n                })\n            });\n        } catch (err){\n            display_notice(\"Nexus community basher failed to load at MANIFEST, see console for error.\",\"red\");\n            console.log(err);\n        }\n    })\n});"},{"type":"function","name":"onGMCP","enabled":true,"id":5,"code":"if (typeof nb == \"undefined\" || typeof nb.gmcp == \"undefined\") return;\nnb.gmcp(args.gmcp_method,args.gmcp_args);"},{"type":"trigger","name":"","enabled":true,"id":3,"matching":"regexp","whole_words":true,"case_sensitive":true,"text":"^(.+)$","actions":[{"action":"script","script":"if (typeof nb == \"undefined\" || typeof nb.trigger == \"undefined\") return;\nnb.trigger(args[1]);"}]},{"type":"alias","name":"","enabled":true,"id":4,"matching":"regexp","whole_words":true,"case_sensitive":true,"prefix_suffix":true,"actions":[{"action":"script","script":"if (typeof nb == \"undefined\" ||\n   typeof nb.alias == \"undefined\" ||\n   !nb.alias(args[0])) {\n    // this allows both direct sends and function calls, in case users have aliases that start in nb.\n    client.aliases_enabled = false;\n    send_command(args[0]);\n    client.aliases_enabled = true;\n}"}],"text":"^nb(.+)$"}]}